# デプロイ（サーバーアップロード）手順

サーバーに公開するために、**`src` フォルダの中身すべて** をアップロードしてください。

## 1. アップロードするフォルダ
以下のフォルダにある **中身すべて** をサーバーの公開ディレクトリ（`public_html` や `www` など）にアップロードします。

**`src`** 
(このフォルダ自体ではなく、この**中にあるファイルやフォルダすべて**をアップロードしてください)

### アップロード後の構成イメージ
サーバーのフォルダ内が以下のようになっているのが正解です。
```text
(サーバーの公開フォルダ/)
  ├── index.php
  ├── 404.html
  ├── db_config.php
  ├── assets/
  ├── store/
  ├── products/
  ├── pages/
  ├── admin/
  ├── legal/
  ... 他
```

---

## 2. アップロード前の重要チェック事項

### ① データベース設定 (`db_config.php`)
サーバー上のデータベース接続情報に合わせて、`db_config.php` を書き換える必要があります。
現状は開発環境用（MAMPなど）の設定になっています。

- **ホスト名** (`$host`): 多くの場合は `localhost` ですが、サーバー会社（例: Xserver, Sakura）の指定に従ってください。
- **データベース名** (`$dbname`): サーバーで作成したデータベース名。
- **ユーザー名** (`$user`): サーバーで作成したDBユーザー名。
- **パスワード** (`$pass`): そのユーザーのパスワード。
- **ポート** (`$port`): 本番サーバーでは通常 **3306** です（現在は8889になっています）。

### ② 決済キーの設定 (本番化する場合)
現在、コードには **テスト用** のPAY.JPキーが設定されています。本番稼働（実際に課金される状態）にする場合は、PAY.JPの管理画面から「本番用キー（Live Key）」を取得し、書き換えてください。

1.  **`src/store/checkout.php`** (362行目付近):
    ```javascript
    // 書き換え前 (テスト用)
    const PUBLIC_KEY = 'pk_test_...'; 
    
    // 書き換え後 (本番用)
    const PUBLIC_KEY = 'pk_live_...'; 
    ```

2.  **`src/store/payment.php`** (14行目付近):
    ```php
    // 書き換え前 (テスト用)
    $PAYJP_SECRET_KEY = 'sk_test_...';
    
    // 書き換え後 (本番用)
    $PAYJP_SECRET_KEY = 'sk_live_...';
    ```
    ※ まだテスト運用の場合はそのままで構いません。

---

## 3. アップロード不要なファイル
`src` フォルダ **以外** の以下のファイルは、開発用ツールのためサーバーには不要です。アップロードしないでください。

- `gulpfile.js`
- `package.json`, `package-lock.json`
- `node_modules/`
- `.git/`
- `*.ps1` (PowerShellスクリプト)
- `*.py` (Pythonスクリプト)
- `.env`
